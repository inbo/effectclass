<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Visualising Effects • effectclass</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Visualising Effects">
<meta property="og:description" content="effectclass">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">effectclass</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/classification.html">Classification</a>
    </li>
    <li>
      <a href="../articles/visualisation.html">Visualisation</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">NEWS</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../CONTRIBUTING.html">Contributing</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/inbo/effectclass" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://fosstodon.org/@thierryo" class="external-link">
    <span class="fa fa-brands fa-mastodon"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/INBOVlaanderen" class="external-link">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://www.facebook.com/pg/INBOVlaanderen" class="external-link">
    <span class="fa fa-facebook"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Visualising Effects</h1>
                        <h4 data-toc-skip class="author">Thierry
Onkelinx</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/inbo/effectclass/blob/HEAD/vignettes/visualisation.Rmd" class="external-link"><code>vignettes/visualisation.Rmd</code></a></small>
      <div class="hidden name"><code>visualisation.Rmd</code></div>

    </div>

    
    
<p>The <code><a href="../articles/classification.html">vignette("classification", package = "effectclass")</a></code>
explains how we can classify effects based on their confidence
intervals. This vignette focusses on visualising effect and their
uncertainty. The packages provides two <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot()</a></code> layers
(<code><a href="../reference/stat_fan.html">stat_fan()</a></code> and <code><a href="../reference/stat_effect.html">stat_effect()</a></code>) and a scale
(<code><a href="../reference/scale_effect.html">scale_effect()</a></code>).</p>
<div class="section level2">
<h2 id="stat_fan">
<code>stat_fan()</code><a class="anchor" aria-label="anchor" href="#stat_fan"></a>
</h2>
<p>The Bank of England visualises uncertainty by using a fan plot <span class="citation">(Britton, Fisher, and Whitley 1998)</span>. Instead of
displaying a single coverage interval, they recommend to display a bunch
of coverage intervals with different levels of transparency.
<code><a href="../reference/stat_fan.html">stat_fan()</a></code> creates the intervals based on a Gaussian
distribution. It uses the <code>y</code> aesthetic for the mean and the
<code>link_sd</code> as the standard error. The default setting in
<code><a href="../reference/stat_fan.html">stat_fan()</a></code> displays three sets of confidence intervals.
Setting <code>fine = TRUE</code> yields a set of nine confidence
intervals.</p>
<table class="table">
<caption>Definition of the three level intervals</caption>
<thead><tr class="header">
<th align="right">opacity</th>
<th align="right">width around the mean</th>
<th align="right">lower</th>
<th align="right">upper</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">90%</td>
<td align="right">30 %</td>
<td align="right">35 %</td>
<td align="right">65%</td>
</tr>
<tr class="even">
<td align="right">60%</td>
<td align="right">60 %</td>
<td align="right">20 %</td>
<td align="right">80%</td>
</tr>
<tr class="odd">
<td align="right">30%</td>
<td align="right">90 %</td>
<td align="right">5 %</td>
<td align="right">95%</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Definition of the nine level intervals</caption>
<thead><tr class="header">
<th align="right">opacity</th>
<th align="right">width around the mean</th>
<th align="right">lower</th>
<th align="right">upper</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">90%</td>
<td align="right">10 %</td>
<td align="right">45 %</td>
<td align="right">55%</td>
</tr>
<tr class="even">
<td align="right">80%</td>
<td align="right">20 %</td>
<td align="right">40 %</td>
<td align="right">60%</td>
</tr>
<tr class="odd">
<td align="right">70%</td>
<td align="right">30 %</td>
<td align="right">35 %</td>
<td align="right">65%</td>
</tr>
<tr class="even">
<td align="right">60%</td>
<td align="right">40 %</td>
<td align="right">30 %</td>
<td align="right">70%</td>
</tr>
<tr class="odd">
<td align="right">50%</td>
<td align="right">50 %</td>
<td align="right">25 %</td>
<td align="right">75%</td>
</tr>
<tr class="even">
<td align="right">40%</td>
<td align="right">60 %</td>
<td align="right">20 %</td>
<td align="right">80%</td>
</tr>
<tr class="odd">
<td align="right">30%</td>
<td align="right">70 %</td>
<td align="right">15 %</td>
<td align="right">85%</td>
</tr>
<tr class="even">
<td align="right">20%</td>
<td align="right">80 %</td>
<td align="right">10 %</td>
<td align="right">90%</td>
</tr>
<tr class="odd">
<td align="right">10%</td>
<td align="right">90 %</td>
<td align="right">5 %</td>
<td align="right">95%</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://inbo.github.io/effectclass/" class="external-link">effectclass</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'effectclass'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     unlist</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">20191216</span><span class="op">)</span></span>
<span><span class="va">timeserie</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  year <span class="op">=</span> <span class="fl">1990</span><span class="op">:</span><span class="fl">2019</span>,</span>
<span>  dx <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">30</span>, sd <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  s <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">30</span>, <span class="fl">1</span>, <span class="fl">0.05</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">timeserie</span><span class="op">$</span><span class="va">index</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">timeserie</span><span class="op">$</span><span class="va">dx</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">timeserie</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">index</span>, link_sd <span class="op">=</span> <span class="va">s</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="../reference/stat_fan.html">stat_fan</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="visualisation_files/figure-html/stat-fan-default-1.png" alt="Default plot using stat_fan()." width="672"><p class="caption">
Default plot using stat_fan().
</p>
</div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">timeserie</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">index</span>, link_sd <span class="op">=</span> <span class="va">s</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/stat_fan.html">stat_fan</a></span><span class="op">(</span>step <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="visualisation_files/figure-html/stat-fan-fine-1.png" alt="Fan plot with three intervals and line." width="672"><p class="caption">
Fan plot with three intervals and line.
</p>
</div>
<p>Some statistical analyses require a different distribution,
e.g. Poisson or binomial. These analyses often use a link function
between the linear predictor and the mean of the distribution. Poisson
uses a log link, binomial a logit link. The uncertainty around the
predictions of the linear predictor (in the link scale) still follows a
Gaussian distribution. However, we want to display the predictions and
their uncertainty in the original scale. The <code>link</code> argument
<code><a href="../reference/stat_fan.html">stat_fan()</a></code> allows the user to specify the required link
function. <code><a href="../reference/stat_fan.html">stat_fan()</a></code> then assumes that <code>y</code>
specifies the median in the original scale. Hence the confidence
intervals in the link-scale use <span class="math inline">\(link(y)\)</span> as their mean. You need to
specify the standard error in the link scale, that why we named the
argument <code>link_sd</code>. <code><a href="../reference/stat_fan.html">stat_fan()</a></code> calculates the
intervals based on <span class="math inline">\(\mathcal{N}(\mu =
link(y), \sigma = link\_sd)\)</span> and back transforms them to the
original scale. Having <code>y</code> in the original scale in
combination with a link function has the benefit that it is easy to
reuse the <code>y</code> in other <code>geoms</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">timeserie</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">index</span>, link_sd <span class="op">=</span> <span class="va">s</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/stat_fan.html">stat_fan</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">"log"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="visualisation_files/figure-html/stat-fan-log-1.png" alt="Plot using stat_fan() with log-link. Note the asymmetric intervals due to the link function." width="672"><p class="caption">
Plot using stat_fan() with log-link. Note the asymmetric intervals due
to the link function.
</p>
</div>
<p><code><a href="../reference/stat_fan.html">stat_fan()</a></code> handles different discrete colours as
demonstrated in the example below.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">timeseries</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">1990</span><span class="op">:</span><span class="fl">2019</span>, category <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">timeseries</span><span class="op">$</span><span class="va">dx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">60</span>, sd <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span>
<span><span class="va">timeseries</span><span class="op">$</span><span class="va">index</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">30</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">timeseries</span><span class="op">$</span><span class="va">dx</span><span class="op">)</span></span>
<span><span class="va">timeseries</span><span class="op">$</span><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">60</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">30</span><span class="op">)</span>, <span class="fl">0.05</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">timeseries</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">index</span>, link_sd <span class="op">=</span> <span class="va">s</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/stat_fan.html">stat_fan</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">category</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="va">category</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="visualisation_files/figure-html/stat-fan-colour2-1.png" alt="stat_fan() with different colours." width="672"><p class="caption">
stat_fan() with different colours.
</p>
</div>
</div>
<div class="section level2">
<h2 id="stat_effect-and-scale_effect">
<code>stat_effect()</code> and <code>scale_effect()</code><a class="anchor" aria-label="anchor" href="#stat_effect-and-scale_effect"></a>
</h2>
<p><code><a href="../reference/stat_effect.html">stat_effect()</a></code> displays a symbol at the location defined
by <code>x</code> and <code>y</code>. The symbol is define by comparing
<code>ymin</code> and <code>ymax</code> with the <code>reference</code>
and the <code>threshold</code>. It returns the unsigned, six level
classification (see
<code><a href="../articles/classification.html">vignette("classification", package = "effectclass")</a></code>). We
prefer the unsigned classification as it has fewer levels and the plot
shows the direction of the effect. The shape of the symbols is defined
by <code><a href="../reference/scale_effect.html">scale_effect()</a></code>, which displays all six classes even if
not every class is present in the data. We selected the shapes to
reflect the amount of uncertainty. We suggest to use a solid shape for
no effect or a significant effect. A triangle give the impression of
direction, so we use this shape for the strong effect. A circle seems a
good symbol for no effect class because it gives no impression of
direction. We represent the moderate effect by a diamond as it resembles
a circle. The effect (without adjective) get a square as symbol. Hollow
shapes represent the unknown (hollow circle) or potential effects
(hollow diamond).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">timeserie</span><span class="op">$</span><span class="va">lcl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">qnorm</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="va">timeserie</span><span class="op">$</span><span class="va">index</span>, <span class="va">timeserie</span><span class="op">$</span><span class="va">s</span><span class="op">)</span></span>
<span><span class="va">timeserie</span><span class="op">$</span><span class="va">ucl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">qnorm</a></span><span class="op">(</span><span class="fl">0.95</span>, <span class="va">timeserie</span><span class="op">$</span><span class="va">index</span>, <span class="va">timeserie</span><span class="op">$</span><span class="va">s</span><span class="op">)</span></span>
<span><span class="va">reference</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">thresholds</span> <span class="op">&lt;-</span> <span class="va">reference</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">*</span> <span class="fl">0.3</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">timeserie</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">index</span>, ymin <span class="op">=</span> <span class="va">lcl</span>, ymax <span class="op">=</span> <span class="va">ucl</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/stat_effect.html">stat_effect</a></span><span class="op">(</span>reference <span class="op">=</span> <span class="va">reference</span>, threshold <span class="op">=</span> <span class="va">thresholds</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="visualisation_files/figure-html/stat-effect-default-1.png" alt="An example of stat_effect() and scale_effect()." width="672"><p class="caption">
An example of stat_effect() and scale_effect().
</p>
</div>
<p>It is possible to combine <code><a href="../reference/stat_fan.html">stat_fan()</a></code> and
<code><a href="../reference/stat_effect.html">stat_effect()</a></code>. If you do so, we recommend to use the same
confidence interval for both the classification and
<code>stat_fan</code>. The widest interval of the three interval version
<code>stat_fan</code> shows a 90% interval, whereas the nine interval
version shows a 95% interval. Adding the thresholds helps the
interpretations.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span></span>
<span>  <span class="va">timeserie</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">index</span>, ymin <span class="op">=</span> <span class="va">lcl</span>, ymax <span class="op">=</span> <span class="va">ucl</span>, link_sd <span class="op">=</span> <span class="va">s</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/stat_fan.html">stat_fan</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/stat_effect.html">stat_effect</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"my title"</span>, reference <span class="op">=</span> <span class="va">reference</span>, threshold <span class="op">=</span> <span class="va">thresholds</span>,</span>
<span>    errorbar <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; Warning: The following aesthetics were dropped during statistical transformation: <span style="color: #00BB00;">ymin</span></span></span>
<span><span class="co">#&gt; and <span style="color: #00BB00;">ymax</span>.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> This can happen when ggplot fails to infer the correct grouping structure in</span></span>
<span><span class="co">#&gt;   the data.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Did you forget to specify a `group` aesthetic or to convert a numerical</span></span>
<span><span class="co">#&gt;   variable into a factor?</span></span>
<span><span class="co">#&gt; The following aesthetics were dropped during statistical transformation: <span style="color: #00BB00;">ymin</span></span></span>
<span><span class="co">#&gt; and <span style="color: #00BB00;">ymax</span>.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> This can happen when ggplot fails to infer the correct grouping structure in</span></span>
<span><span class="co">#&gt;   the data.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Did you forget to specify a `group` aesthetic or to convert a numerical</span></span>
<span><span class="co">#&gt;   variable into a factor?</span></span></code></pre></div>
<div class="figure">
<img src="visualisation_files/figure-html/stat-effect-fan-1.png" alt="Combination of stat_effect and stat_fan with custom title." width="672"><p class="caption">
Combination of stat_effect and stat_fan with custom title.
</p>
</div>
<p>When the <code>x</code> value is a discrete variable (e.g. model
parameters), we cannot use <code><a href="../reference/stat_fan.html">stat_fan()</a></code> as-is. In such case
we recommend to add <code>geom = "rect"</code> or
<code>geom = "linerange"</code> to <code>stat_fan</code> over using
error bars.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Example taken from help("lm")</span></span>
<span><span class="co">## Annette Dobson (1990) "An Introduction to Generalized Linear Models".</span></span>
<span><span class="co">## Page 9: Plant Weight Data.</span></span>
<span><span class="va">ctl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4.17</span>, <span class="fl">5.58</span>, <span class="fl">5.18</span>, <span class="fl">6.11</span>, <span class="fl">4.50</span>, <span class="fl">4.61</span>, <span class="fl">5.17</span>, <span class="fl">4.53</span>, <span class="fl">5.33</span>, <span class="fl">5.14</span><span class="op">)</span></span>
<span><span class="va">trt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4.81</span>, <span class="fl">4.17</span>, <span class="fl">4.41</span>, <span class="fl">3.59</span>, <span class="fl">5.87</span>, <span class="fl">3.83</span>, <span class="fl">6.03</span>, <span class="fl">4.89</span>, <span class="fl">4.32</span>, <span class="fl">4.69</span><span class="op">)</span></span>
<span><span class="va">group</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/gl.html" class="external-link">gl</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">10</span>, <span class="fl">20</span>, labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Control"</span>, <span class="st">"Treatment"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">weight</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">ctl</span>, <span class="va">trt</span><span class="op">)</span></span>
<span><span class="va">lm_d90</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">weight</span> <span class="op">~</span> <span class="fl">0</span> <span class="op">+</span> <span class="va">group</span><span class="op">)</span> <span class="co"># omitting intercept</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">effect_d90</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">lm_d90</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">effect_d90</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">effect_d90</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">effect_d90</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"SE"</span></span>
<span><span class="va">effect_d90</span><span class="op">$</span><span class="va">parameter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">effect_d90</span><span class="op">)</span></span>
<span><span class="va">effect_d90</span><span class="op">$</span><span class="va">parameter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"group"</span>, <span class="st">""</span>, <span class="va">effect_d90</span><span class="op">$</span><span class="va">parameter</span><span class="op">)</span></span>
<span><span class="va">effect_d90</span><span class="op">$</span><span class="va">LCL</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">qnorm</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="va">effect_d90</span><span class="op">$</span><span class="va">Estimate</span>, <span class="va">effect_d90</span><span class="op">$</span><span class="va">SE</span><span class="op">)</span></span>
<span><span class="va">effect_d90</span><span class="op">$</span><span class="va">UCL</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">qnorm</a></span><span class="op">(</span><span class="fl">0.95</span>, <span class="va">effect_d90</span><span class="op">$</span><span class="va">Estimate</span>, <span class="va">effect_d90</span><span class="op">$</span><span class="va">SE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span></span>
<span>  <span class="va">effect_d90</span>,</span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">parameter</span>, y <span class="op">=</span> <span class="va">Estimate</span>, ymin <span class="op">=</span> <span class="va">LCL</span>, ymax <span class="op">=</span> <span class="va">UCL</span>, link_sd <span class="op">=</span> <span class="va">SE</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/stat_fan.html">stat_fan</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"rect"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/stat_effect.html">stat_effect</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"class"</span>, threshold <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4.5</span>, <span class="fl">5.5</span><span class="op">)</span>, reference <span class="op">=</span> <span class="fl">5</span>, errorbar <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="visualisation_files/figure-html/effect-stat-1.png" alt="Model parameters of model with stat_fan and geom rect." width="672"><p class="caption">
Model parameters of model with stat_fan and geom rect.
</p>
</div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span></span>
<span>  <span class="va">effect_d90</span>,</span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">parameter</span>, y <span class="op">=</span> <span class="va">Estimate</span>, ymin <span class="op">=</span> <span class="va">LCL</span>, ymax <span class="op">=</span> <span class="va">UCL</span>, link_sd <span class="op">=</span> <span class="va">SE</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/stat_effect.html">stat_effect</a></span><span class="op">(</span>threshold <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4.5</span>, <span class="fl">5.5</span><span class="op">)</span>, reference <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="visualisation_files/figure-html/effect-errorbar-1.png" alt="Model parameters with single errorbars." width="672"><p class="caption">
Model parameters with single errorbars.
</p>
</div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span></span>
<span>  <span class="va">effect_d90</span>,</span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">parameter</span>, y <span class="op">=</span> <span class="va">Estimate</span>, ymin <span class="op">=</span> <span class="va">LCL</span>, ymax <span class="op">=</span> <span class="va">UCL</span>, link_sd <span class="op">=</span> <span class="va">SE</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/stat_fan.html">stat_fan</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"linerange"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/stat_effect.html">stat_effect</a></span><span class="op">(</span></span>
<span>    threshold <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4.5</span>, <span class="fl">5.5</span><span class="op">)</span>, reference <span class="op">=</span> <span class="fl">5</span>, errorbar <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="../reference/class_labels.html">class_labels</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"effect"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="visualisation_files/figure-html/effect-fan-errorbar-1.png" alt="Model parameters with multiple lineranges." width="672"><p class="caption">
Model parameters with multiple lineranges.
</p>
</div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span>, <span class="op">-</span><span class="fl">0.5</span>, <span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">1.5</span>, <span class="op">-</span><span class="fl">1.5</span>, <span class="fl">0.5</span>, <span class="op">-</span><span class="fl">0.5</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>  sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.25</span>, <span class="fl">0.25</span>, <span class="fl">0.25</span>, <span class="fl">0.25</span>, <span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">ds</span><span class="op">$</span><span class="va">lcl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">qnorm</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="va">ds</span><span class="op">$</span><span class="va">mean</span>, <span class="va">ds</span><span class="op">$</span><span class="va">sd</span><span class="op">)</span></span>
<span><span class="va">ds</span><span class="op">$</span><span class="va">ucl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">qnorm</a></span><span class="op">(</span><span class="fl">0.95</span>, <span class="va">ds</span><span class="op">$</span><span class="va">mean</span>, <span class="va">ds</span><span class="op">$</span><span class="va">sd</span><span class="op">)</span></span>
<span><span class="va">ds</span><span class="op">$</span><span class="va">effect</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/classification.html">classification</a></span><span class="op">(</span><span class="va">ds</span><span class="op">$</span><span class="va">lcl</span>, <span class="va">ds</span><span class="op">$</span><span class="va">ucl</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">ds</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">effect</span>, y <span class="op">=</span> <span class="va">mean</span>, ymin <span class="op">=</span> <span class="va">lcl</span>, ymax <span class="op">=</span> <span class="va">ucl</span>, link_sd <span class="op">=</span> <span class="va">sd</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/stat_effect.html">stat_effect</a></span><span class="op">(</span>threshold <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="visualisation_files/figure-html/effect-detailed-signed-1.png" alt="Symbols for a detailed and signed classification." width="672"><p class="caption">
Symbols for a detailed and signed classification.
</p>
</div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">ds</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">effect</span>, y <span class="op">=</span> <span class="va">mean</span>, ymin <span class="op">=</span> <span class="va">lcl</span>, ymax <span class="op">=</span> <span class="va">ucl</span>, link_sd <span class="op">=</span> <span class="va">sd</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/stat_effect.html">stat_effect</a></span><span class="op">(</span>threshold <span class="op">=</span> <span class="fl">1</span>, signed <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="visualisation_files/figure-html/effect-detailed-unsigned-1.png" alt="Symbols for a detailed and unsigned classification." width="672"><p class="caption">
Symbols for a detailed and unsigned classification.
</p>
</div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">ds</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">effect</span>, y <span class="op">=</span> <span class="va">mean</span>, ymin <span class="op">=</span> <span class="va">lcl</span>, ymax <span class="op">=</span> <span class="va">ucl</span>, link_sd <span class="op">=</span> <span class="va">sd</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/stat_effect.html">stat_effect</a></span><span class="op">(</span>threshold <span class="op">=</span> <span class="fl">1</span>, detailed <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="visualisation_files/figure-html/effect-coarse-signed-1.png" alt="Symbols for a coarse and signed classification." width="672"><p class="caption">
Symbols for a coarse and signed classification.
</p>
</div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">ds</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">effect</span>, y <span class="op">=</span> <span class="va">mean</span>, ymin <span class="op">=</span> <span class="va">lcl</span>, ymax <span class="op">=</span> <span class="va">ucl</span>, link_sd <span class="op">=</span> <span class="va">sd</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/stat_effect.html">stat_effect</a></span><span class="op">(</span>threshold <span class="op">=</span> <span class="fl">1</span>, detailed <span class="op">=</span> <span class="cn">FALSE</span>, signed <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="visualisation_files/figure-html/effect-coarse-unsigned-1.png" alt="Symbols for a coarse and unsigned classification." width="672"><p class="caption">
Symbols for a coarse and unsigned classification.
</p>
</div>
</div>
<div class="section level2">
<h2 id="format_ci-and-classification">
<code>format_ci()</code> and <code>classification()</code><a class="anchor" aria-label="anchor" href="#format_ci-and-classification"></a>
</h2>
<p>When presenting effects in a tabular format we recommend to display
the effect with its confidence interval in conjunction with the
classification of the effect. Sort the rows of the table in a way that
provides maximum information. E.g. sort first on the classification and
then on the estimate. This will place the least informative effects at
the bottom of the table. The table starts with a gradient from the
strongest positive effects, over no effect to the strongest negative
effects.</p>
<p>The <code>effectclass</code> package provides
<code><a href="../reference/format_ci.html">format_ci()</a></code>, which formats the estimate and its confidence
interval as text. It automatically rounds the numbers to a sensible
magnitude depending on the width of the confidence interval. The table
below gives an example on how the estimate and its confidence interval
gets translated into a classification and formatted text. In practice we
would only publish the classification and the formatted text.</p>
<table class="table">
<caption>Different effects, their classification and formatted
text</caption>
<colgroup>
<col width="13%">
<col width="16%">
<col width="14%">
<col width="20%">
<col width="35%">
</colgroup>
<thead><tr class="header">
<th align="left">estimate</th>
<th align="left">lcl</th>
<th align="left">ucl</th>
<th align="center">classifcation</th>
<th align="center">formatted</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">4.7123890</td>
<td align="left">4.6959404</td>
<td align="left">4.7288375</td>
<td align="center"><code>++</code></td>
<td align="center">4.712 (4.696; 4.729)</td>
</tr>
<tr class="even">
<td align="left">4.7123890</td>
<td align="left">4.5479036</td>
<td align="left">4.8768743</td>
<td align="center"><code>++</code></td>
<td align="center">4.71 (4.55; 4.88)</td>
</tr>
<tr class="odd">
<td align="left">5.4977871</td>
<td align="left">5.4813386</td>
<td align="left">5.5142357</td>
<td align="center"><code>++</code></td>
<td align="center">5.498 (5.481; 5.514)</td>
</tr>
<tr class="even">
<td align="left">5.4977871</td>
<td align="left">5.3333018</td>
<td align="left">5.6622725</td>
<td align="center"><code>++</code></td>
<td align="center">5.50 (5.33; 5.66)</td>
</tr>
<tr class="odd">
<td align="left">6.2831853</td>
<td align="left">6.2667368</td>
<td align="left">6.2996338</td>
<td align="center"><code>++</code></td>
<td align="center">6.283 (6.267; 6.300)</td>
</tr>
<tr class="even">
<td align="left">6.2831853</td>
<td align="left">6.1186999</td>
<td align="left">6.4476707</td>
<td align="center"><code>++</code></td>
<td align="center">6.28 (6.12; 6.45)</td>
</tr>
<tr class="odd">
<td align="left">6.2831853</td>
<td align="left">4.6383317</td>
<td align="left">7.9280389</td>
<td align="center"><code>++</code></td>
<td align="center">6.3 (4.6; 7.9)</td>
</tr>
<tr class="even">
<td align="left">3.9269908</td>
<td align="left">3.7625055</td>
<td align="left">4.0914762</td>
<td align="center"><code>+</code></td>
<td align="center">3.93 (3.76; 4.09)</td>
</tr>
<tr class="odd">
<td align="left">4.7123890</td>
<td align="left">3.0675354</td>
<td align="left">6.3572426</td>
<td align="center"><code>+</code></td>
<td align="center">4.7 (3.1; 6.4)</td>
</tr>
<tr class="even">
<td align="left">5.4977871</td>
<td align="left">3.8529335</td>
<td align="left">7.1426408</td>
<td align="center"><code>+</code></td>
<td align="center">5.5 (3.9; 7.1)</td>
</tr>
<tr class="odd">
<td align="left">3.1415927</td>
<td align="left">3.1251441</td>
<td align="left">3.1580412</td>
<td align="center"><code>+~</code></td>
<td align="center">3.142 (3.125; 3.158)</td>
</tr>
<tr class="even">
<td align="left">3.9269908</td>
<td align="left">3.9105423</td>
<td align="left">3.9434394</td>
<td align="center"><code>+~</code></td>
<td align="center">3.927 (3.911; 3.943)</td>
</tr>
<tr class="odd">
<td align="left">3.1415927</td>
<td align="left">2.9771073</td>
<td align="left">3.3060780</td>
<td align="center"><code>~</code></td>
<td align="center">3.14 (2.98; 3.31)</td>
</tr>
<tr class="even">
<td align="left">2.3561945</td>
<td align="left">2.3397460</td>
<td align="left">2.3726430</td>
<td align="center"><code>-~</code></td>
<td align="center">2.356 (2.340; 2.373)</td>
</tr>
<tr class="odd">
<td align="left">2.3561945</td>
<td align="left">2.1917091</td>
<td align="left">2.5206799</td>
<td align="center"><code>-~</code></td>
<td align="center">2.36 (2.19; 2.52)</td>
</tr>
<tr class="even">
<td align="left">0.7853982</td>
<td align="left">-0.8594555</td>
<td align="left">2.4302518</td>
<td align="center"><code>-</code></td>
<td align="center">0.8 (-0.9; 2.4)</td>
</tr>
<tr class="odd">
<td align="left">0.0000000</td>
<td align="left">-0.0164485</td>
<td align="left">0.0164485</td>
<td align="center"><code>--</code></td>
<td align="center">0.0000 (-0.0164; 0.0164)</td>
</tr>
<tr class="even">
<td align="left">0.0000000</td>
<td align="left">-0.1644854</td>
<td align="left">0.1644854</td>
<td align="center"><code>--</code></td>
<td align="center">0.000 (-0.164; 0.164)</td>
</tr>
<tr class="odd">
<td align="left">0.0000000</td>
<td align="left">-1.6448536</td>
<td align="left">1.6448536</td>
<td align="center"><code>--</code></td>
<td align="center">0.00 (-1.64; 1.64)</td>
</tr>
<tr class="even">
<td align="left">0.7853982</td>
<td align="left">0.7689496</td>
<td align="left">0.8018467</td>
<td align="center"><code>--</code></td>
<td align="center">0.785 (0.769; 0.802)</td>
</tr>
<tr class="odd">
<td align="left">0.7853982</td>
<td align="left">0.6209128</td>
<td align="left">0.9498835</td>
<td align="center"><code>--</code></td>
<td align="center">0.79 (0.62; 0.95)</td>
</tr>
<tr class="even">
<td align="left">1.5707963</td>
<td align="left">1.5543478</td>
<td align="left">1.5872449</td>
<td align="center"><code>--</code></td>
<td align="center">1.5708 (1.5543; 1.5872)</td>
</tr>
<tr class="odd">
<td align="left">1.5707963</td>
<td align="left">1.4063110</td>
<td align="left">1.7352817</td>
<td align="center"><code>--</code></td>
<td align="center">1.571 (1.406; 1.735)</td>
</tr>
<tr class="even">
<td align="left">3.9269908</td>
<td align="left">2.2821372</td>
<td align="left">5.5718444</td>
<td align="center"><code>?+</code></td>
<td align="center">3.9 (2.3; 5.6)</td>
</tr>
<tr class="odd">
<td align="left">1.5707963</td>
<td align="left">-0.0740573</td>
<td align="left">3.2156500</td>
<td align="center"><code>?-</code></td>
<td align="center">1.6 (-0.1; 3.2)</td>
</tr>
<tr class="even">
<td align="left">0.0000000</td>
<td align="left">-18.0933899</td>
<td align="left">18.0933899</td>
<td align="center"><code>?</code></td>
<td align="center">0.0 (-18.1; 18.1)</td>
</tr>
<tr class="odd">
<td align="left">0.7853982</td>
<td align="left">-17.3079917</td>
<td align="left">18.8787881</td>
<td align="center"><code>?</code></td>
<td align="center">0.8 (-17.3; 18.9)</td>
</tr>
<tr class="even">
<td align="left">1.5707963</td>
<td align="left">-16.5225936</td>
<td align="left">19.6641862</td>
<td align="center"><code>?</code></td>
<td align="center">1.6 (-16.5; 19.7)</td>
</tr>
<tr class="odd">
<td align="left">2.3561945</td>
<td align="left">0.7113409</td>
<td align="left">4.0010481</td>
<td align="center"><code>?</code></td>
<td align="center">2.4 (0.7; 4.0)</td>
</tr>
<tr class="even">
<td align="left">2.3561945</td>
<td align="left">-15.7371954</td>
<td align="left">20.4495844</td>
<td align="center"><code>?</code></td>
<td align="center">2 (-16; 20)</td>
</tr>
<tr class="odd">
<td align="left">3.1415927</td>
<td align="left">1.4967390</td>
<td align="left">4.7864463</td>
<td align="center"><code>?</code></td>
<td align="center">3.1 (1.5; 4.8)</td>
</tr>
<tr class="even">
<td align="left">3.1415927</td>
<td align="left">-14.9517972</td>
<td align="left">21.2349826</td>
<td align="center"><code>?</code></td>
<td align="center">3 (-15; 21)</td>
</tr>
<tr class="odd">
<td align="left">3.9269908</td>
<td align="left">-14.1663991</td>
<td align="left">22.0203807</td>
<td align="center"><code>?</code></td>
<td align="center">4 (-14; 22)</td>
</tr>
<tr class="even">
<td align="left">4.7123890</td>
<td align="left">-13.3810009</td>
<td align="left">22.8057789</td>
<td align="center"><code>?</code></td>
<td align="center">5 (-13; 23)</td>
</tr>
<tr class="odd">
<td align="left">5.4977871</td>
<td align="left">-12.5956028</td>
<td align="left">23.5911770</td>
<td align="center"><code>?</code></td>
<td align="center">5 (-13; 24)</td>
</tr>
<tr class="even">
<td align="left">6.2831853</td>
<td align="left">-11.8102046</td>
<td align="left">24.3765752</td>
<td align="center"><code>?</code></td>
<td align="center">6 (-12; 24)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-britton.fisher.ea1998InflationReportProjections" class="csl-entry">
Britton, Erik, Paul Fisher, and John Whitley. 1998. <span>“The Inflation
Report Projections: Understanding the Fan Chart.”</span> <em>Bank of
England Quarterly Bulletin</em>, March, 30–37.
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://www.muscardinus.be" class="external-link">Thierry Onkelinx</a>, <a href="https://www.vlaanderen.be/inbo/en-gb" class="external-link"><img src="https://inbo.github.io/checklist/reference/figures/logo-en.png" height="24"></a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
